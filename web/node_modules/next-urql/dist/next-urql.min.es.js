import e,{useState as n,createElement as t}from"react";import r from"react-ssr-prepass";import{createClient as i,ssrExchange as o,dedupExchange as u,cacheExchange as a,fetchExchange as l,Provider as s}from"urql";function c(){return(c=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}var f,p=null;function v(){p=null}function d(){return null}function m(e,n){var t="undefined"==typeof window;return!t&&p||((p=i(c({},e,{suspense:n&&(t||e.suspense)}))).toJSON=d),p}function h(){}function q(i,p){return p||(p={}),function(d){var q=Boolean((d.getInitialProps||p.ssr)&&!p.neverSuspend),g=function(r){var p=r.urqlClient,h=r.urqlState,g=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&-1===n.indexOf(r)&&(t[r]=e[r]);return t}(r,["urqlClient","urqlState"]),P=n(0),y=e.useMemo((function(){if(p)return p;f&&"undefined"!=typeof window||(f=o({initialState:h}));var e=i(f);return e.exchanges||(e.exchanges=[u,a,f,l]),m(e,q)}),[p,h,P[0]]);return e.createElement(s,{value:y},t(d,c({},g,{urqlClient:y,resetUrqlClient:function(){v(),f=o({initialState:void 0}),P[1](P[0]+1)}})))};return g.displayName="withUrqlClient("+(d.displayName||d.name||"Component")+")",(d.getInitialProps||p.ssr)&&(g.getInitialProps=function(n){function t(){return c({},S,{urqlState:P?P.extractData():void 0,urqlClient:C})}function s(){if("undefined"!=typeof window)return c({},S,{urqlClient:C});var n=c({},S,{urqlClient:C}),i=q?n:{pageProps:n};const o=function(){if(!p.neverSuspend)return Promise.resolve(r(e.createElement(v,c({},i)))).then(h)}();return o&&o.then?o.then(t):t()}function f(e){S=e}try{var v=n.AppTree,q=!!n.Component,g=q?n.ctx:n,P=o({initialState:void 0}),y=i(P,g);y.exchanges||(y.exchanges=[u,a,P,l]);var C=m(y,!p.neverSuspend);C&&(g.urqlClient=C);var S={};const e=function(){if(d.getInitialProps)return Promise.resolve(d.getInitialProps(n)).then(f)}();return Promise.resolve(e&&e.then?e.then(s):s())}catch(e){return Promise.reject(e)}}),g}}export{m as initUrqlClient,q as withUrqlClient};
//# sourceMappingURL=next-urql.min.es.js.map
